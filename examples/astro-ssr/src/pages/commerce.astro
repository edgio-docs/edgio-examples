---
import { getOrigin } from '@/helper'
import Commerce from '@/components/Commerce'
import MainLayout from '@/layouts/MainLayout.astro'

const host = Astro.request.headers.get('host')
const origin = getOrigin({ headers: { host } })
const resp = await fetch(`${origin}/l0-api/products/all`)
const data = await resp.json()
---

<MainLayout>
  <Commerce client:load data={data} />
</MainLayout>
